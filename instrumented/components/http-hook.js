function cov_fy6gvl507() {
  var path = "C:\\Users\\akiku\\OneDrive\\Ty\xF6p\xF6yt\xE4\\Web-sovelluskehitys\\studentin\\client\\src\\components\\http-hook.js";
  var hash = "b292c0b02327b552aff908c0452ca758c97fba8d";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\akiku\\OneDrive\\Ty\xF6p\xF6yt\xE4\\Web-sovelluskehitys\\studentin\\client\\src\\components\\http-hook.js",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 29
        },
        end: {
          line: 58,
          column: 1
        }
      },
      "1": {
        start: {
          line: 4,
          column: 36
        },
        end: {
          line: 4,
          column: 51
        }
      },
      "2": {
        start: {
          line: 5,
          column: 28
        },
        end: {
          line: 5,
          column: 38
        }
      },
      "3": {
        start: {
          line: 7,
          column: 29
        },
        end: {
          line: 7,
          column: 39
        }
      },
      "4": {
        start: {
          line: 9,
          column: 22
        },
        end: {
          line: 40,
          column: 3
        }
      },
      "5": {
        start: {
          line: 11,
          column: 6
        },
        end: {
          line: 11,
          column: 25
        }
      },
      "6": {
        start: {
          line: 12,
          column: 37
        },
        end: {
          line: 12,
          column: 58
        }
      },
      "7": {
        start: {
          line: 13,
          column: 6
        },
        end: {
          line: 13,
          column: 62
        }
      },
      "8": {
        start: {
          line: 14,
          column: 6
        },
        end: {
          line: 37,
          column: 7
        }
      },
      "9": {
        start: {
          line: 15,
          column: 25
        },
        end: {
          line: 20,
          column: 10
        }
      },
      "10": {
        start: {
          line: 22,
          column: 21
        },
        end: {
          line: 22,
          column: 42
        }
      },
      "11": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 26,
          column: 10
        }
      },
      "12": {
        start: {
          line: 25,
          column: 23
        },
        end: {
          line: 25,
          column: 57
        }
      },
      "13": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 30,
          column: 9
        }
      },
      "14": {
        start: {
          line: 29,
          column: 10
        },
        end: {
          line: 29,
          column: 40
        }
      },
      "15": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 28
        }
      },
      "16": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 20
        }
      },
      "17": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 30
        }
      },
      "18": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 28
        }
      },
      "19": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 18
        }
      },
      "20": {
        start: {
          line: 42,
          column: 21
        },
        end: {
          line: 44,
          column: 3
        }
      },
      "21": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 43,
          column: 19
        }
      },
      "22": {
        start: {
          line: 46,
          column: 2
        },
        end: {
          line: 55,
          column: 9
        }
      },
      "23": {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 54,
          column: 6
        }
      },
      "24": {
        start: {
          line: 51,
          column: 6
        },
        end: {
          line: 53,
          column: 8
        }
      },
      "25": {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 52,
          column: 31
        }
      },
      "26": {
        start: {
          line: 57,
          column: 2
        },
        end: {
          line: 57,
          column: 55
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 3,
            column: 29
          },
          end: {
            line: 3,
            column: 30
          }
        },
        loc: {
          start: {
            line: 3,
            column: 35
          },
          end: {
            line: 58,
            column: 1
          }
        },
        line: 3
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 5
          }
        },
        loc: {
          start: {
            line: 10,
            column: 62
          },
          end: {
            line: 38,
            column: 5
          }
        },
        line: 10
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 25,
            column: 10
          },
          end: {
            line: 25,
            column: 11
          }
        },
        loc: {
          start: {
            line: 25,
            column: 23
          },
          end: {
            line: 25,
            column: 57
          }
        },
        line: 25
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 42,
            column: 21
          },
          end: {
            line: 42,
            column: 22
          }
        },
        loc: {
          start: {
            line: 42,
            column: 27
          },
          end: {
            line: 44,
            column: 3
          }
        },
        line: 42
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 46,
            column: 12
          },
          end: {
            line: 46,
            column: 13
          }
        },
        loc: {
          start: {
            line: 46,
            column: 18
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 46
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 48,
            column: 11
          },
          end: {
            line: 48,
            column: 12
          }
        },
        loc: {
          start: {
            line: 48,
            column: 17
          },
          end: {
            line: 54,
            column: 5
          }
        },
        line: 48
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 51,
            column: 41
          },
          end: {
            line: 51,
            column: 42
          }
        },
        loc: {
          start: {
            line: 52,
            column: 8
          },
          end: {
            line: 52,
            column: 31
          }
        },
        line: 52
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 10,
            column: 16
          },
          end: {
            line: 10,
            column: 30
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 10,
            column: 25
          },
          end: {
            line: 10,
            column: 30
          }
        }],
        line: 10
      },
      "1": {
        loc: {
          start: {
            line: 10,
            column: 32
          },
          end: {
            line: 10,
            column: 43
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 10,
            column: 39
          },
          end: {
            line: 10,
            column: 43
          }
        }],
        line: 10
      },
      "2": {
        loc: {
          start: {
            line: 10,
            column: 45
          },
          end: {
            line: 10,
            column: 57
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 10,
            column: 55
          },
          end: {
            line: 10,
            column: 57
          }
        }],
        line: 10
      },
      "3": {
        loc: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        }, {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        }],
        line: 28
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0],
      "1": [0],
      "2": [0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "b292c0b02327b552aff908c0452ca758c97fba8d"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_fy6gvl507 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_fy6gvl507();
import { useState, useCallback, useRef, useEffect } from 'react';
cov_fy6gvl507().s[0]++;
export const useHttpClient = () => {
  cov_fy6gvl507().f[0]++;
  const [isLoading, setIsLoading] = (cov_fy6gvl507().s[1]++, useState(false));
  const [error, setError] = (cov_fy6gvl507().s[2]++, useState());
  const activeHttpRequests = (cov_fy6gvl507().s[3]++, useRef([])); //create a reference hook

  const sendRequest = (cov_fy6gvl507().s[4]++, useCallback(async (url, method = (cov_fy6gvl507().b[0][0]++, 'GET'), body = (cov_fy6gvl507().b[1][0]++, null), headers = (cov_fy6gvl507().b[2][0]++, {})) => {
    cov_fy6gvl507().f[1]++;
    cov_fy6gvl507().s[5]++;
    setIsLoading(true);
    const requestAbortController = (cov_fy6gvl507().s[6]++, new AbortController()); //built into browsers

    cov_fy6gvl507().s[7]++;
    activeHttpRequests.current.push(requestAbortController); //add the abort controller to our ref, doesnt change over render cycles

    cov_fy6gvl507().s[8]++;

    try {
      const response = (cov_fy6gvl507().s[9]++, await fetch(url, {
        method,
        body,
        headers,
        signal: requestAbortController.signal
      }));
      const data = (cov_fy6gvl507().s[10]++, await response.json());
      cov_fy6gvl507().s[11]++;
      activeHttpRequests.current = activeHttpRequests.current.filter(reqCtrl => {
        cov_fy6gvl507().f[2]++;
        cov_fy6gvl507().s[12]++;
        return reqCtrl !== requestAbortController;
      });
      cov_fy6gvl507().s[13]++;

      if (!response.ok) {
        cov_fy6gvl507().b[3][0]++;
        cov_fy6gvl507().s[14]++;
        throw new Error(data.message);
      } else {
        cov_fy6gvl507().b[3][1]++;
      }

      cov_fy6gvl507().s[15]++;
      setIsLoading(false);
      cov_fy6gvl507().s[16]++;
      return data;
    } catch (err) {
      cov_fy6gvl507().s[17]++;
      setError(err.message);
      cov_fy6gvl507().s[18]++;
      setIsLoading(false);
      cov_fy6gvl507().s[19]++;
      throw err; //let the user know
    }
  }, []));
  cov_fy6gvl507().s[20]++;

  const clearError = () => {
    cov_fy6gvl507().f[3]++;
    cov_fy6gvl507().s[21]++;
    setError(null);
  };

  cov_fy6gvl507().s[22]++;
  useEffect(() => {
    cov_fy6gvl507().f[4]++;
    cov_fy6gvl507().s[23]++;
    //We will use an empty useeffect to abort the requests
    return () => {
      cov_fy6gvl507().f[5]++;
      cov_fy6gvl507().s[24]++;
      //when the component unmounts. The empty function becomes an cleanup
      // eslint-disable-next-line react-hooks/exhaustive-deps
      activeHttpRequests.current.forEach(abortController => {
        cov_fy6gvl507().f[6]++;
        cov_fy6gvl507().s[25]++;
        return abortController.abort();
      });
    };
  }, []);
  cov_fy6gvl507().s[26]++;
  return {
    isLoading,
    error,
    sendRequest,
    clearError
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHAtaG9vay5qcyJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlSHR0cENsaWVudCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJhY3RpdmVIdHRwUmVxdWVzdHMiLCJzZW5kUmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJoZWFkZXJzIiwicmVxdWVzdEFib3J0Q29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsImN1cnJlbnQiLCJwdXNoIiwicmVzcG9uc2UiLCJmZXRjaCIsInNpZ25hbCIsImRhdGEiLCJqc29uIiwiZmlsdGVyIiwicmVxQ3RybCIsIm9rIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXJyIiwiY2xlYXJFcnJvciIsImZvckVhY2giLCJhYm9ydENvbnRyb2xsZXIiLCJhYm9ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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S0FBaEI7QUFBdUIsT0FEekI7QUFHRCxLQU5EO0FBT0QsR0FUUSxFQVNOLEVBVE0sQ0FBVDtBQTNDaUM7QUFzRGpDLFNBQU87QUFBRTVCLElBQUFBLFNBQUY7QUFBYUUsSUFBQUEsS0FBYjtBQUFvQkcsSUFBQUEsV0FBcEI7QUFBaUNvQixJQUFBQTtBQUFqQyxHQUFQO0FBQ0QsQ0F2RE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgdXNlSHR0cENsaWVudCA9ICgpID0+IHtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgpO1xuXG4gIGNvbnN0IGFjdGl2ZUh0dHBSZXF1ZXN0cyA9IHVzZVJlZihbXSk7IC8vY3JlYXRlIGEgcmVmZXJlbmNlIGhvb2tcblxuICBjb25zdCBzZW5kUmVxdWVzdCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICh1cmwsIG1ldGhvZCA9ICdHRVQnLCBib2R5ID0gbnVsbCwgaGVhZGVycyA9IHt9KSA9PiB7XG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICBjb25zdCByZXF1ZXN0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOyAvL2J1aWx0IGludG8gYnJvd3NlcnNcbiAgICAgIGFjdGl2ZUh0dHBSZXF1ZXN0cy5jdXJyZW50LnB1c2gocmVxdWVzdEFib3J0Q29udHJvbGxlcik7IC8vYWRkIHRoZSBhYm9ydCBjb250cm9sbGVyIHRvIG91ciByZWYsIGRvZXNudCBjaGFuZ2Ugb3ZlciByZW5kZXIgY3ljbGVzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICBib2R5LFxuICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgc2lnbmFsOiByZXF1ZXN0QWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICBhY3RpdmVIdHRwUmVxdWVzdHMuY3VycmVudCA9IGFjdGl2ZUh0dHBSZXF1ZXN0cy5jdXJyZW50LmZpbHRlcihcbiAgICAgICAgICAocmVxQ3RybCkgPT4gcmVxQ3RybCAhPT0gcmVxdWVzdEFib3J0Q29udHJvbGxlclxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHRocm93IGVycjsgLy9sZXQgdGhlIHVzZXIga25vd1xuICAgICAgfVxuICAgIH0sXG4gICAgW11cbiAgKTtcblxuICBjb25zdCBjbGVhckVycm9yID0gKCkgPT4ge1xuICAgIHNldEVycm9yKG51bGwpO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy9XZSB3aWxsIHVzZSBhbiBlbXB0eSB1c2VlZmZlY3QgdG8gYWJvcnQgdGhlIHJlcXVlc3RzXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzLiBUaGUgZW1wdHkgZnVuY3Rpb24gYmVjb21lcyBhbiBjbGVhbnVwXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgICBhY3RpdmVIdHRwUmVxdWVzdHMuY3VycmVudC5mb3JFYWNoKChhYm9ydENvbnRyb2xsZXIpID0+XG4gICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpXG4gICAgICApO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4geyBpc0xvYWRpbmcsIGVycm9yLCBzZW5kUmVxdWVzdCwgY2xlYXJFcnJvciB9O1xufTtcbiJdfQ==